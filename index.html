<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#0f172a">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>NguonPhimVIP - Xem phim ch·∫•t l∆∞·ª£ng cao</title>
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<link rel="shortcut icon" href="favicon.svg">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<!-- Th√™m Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
/* ==================== BI·∫æN TO√ÄN C·ª§C & RESET ==================== */
:root {
--primary: #3b82f6;
--primary-dark: #1d4ed8;
--primary-light: #60a5fa;
--primary-transparent: rgba(59, 130, 246, 0.1);
--secondary: #ef4444;
--accent: #f59e0b;
--success: #10b981;
--warning: #f59e0b;
--danger: #ef4444;
--dark: #0f172a;
--darker: #020617;
--light: #f8fafc;
--gray: #64748b;
--light-gray: #e2e8f0;
--lighter-gray: #f1f5f9;
--white: #ffffff;
--black: #000000;
/* Touch targets for mobile */
--touch-target-min: 36px;
--touch-target-ideal: 40px;
/* Gradients */
--gradient-primary: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
--gradient-accent: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
--gradient-dark: linear-gradient(135deg, #0f172a 0%, #020617 100%);
--gradient-success: linear-gradient(135deg, #10b981 0%, #059669 100%);
--gradient-warning: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
--gradient-danger: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
/* Shadows */
--shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.05);
--shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
--shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
--shadow-md: 0 3px 6px rgba(0, 0, 0, 0.12);
--shadow-lg: 0 5px 10px rgba(0, 0, 0, 0.15);
--shadow-xl: 0 10px 20px rgba(0, 0, 0, 0.2);
--shadow-inner: inset 0 1px 2px rgba(0, 0, 0, 0.06);
/* Transitions */
--transition-fast: all 0.15s ease;
--transition: all 0.25s ease;
--transition-slow: all 0.4s ease;
/* Border Radius */
--radius-xs: 2px;
--radius-sm: 3px;
--radius: 4px;
--radius-md: 5px;
--radius-lg: 6px;
--radius-xl: 8px;
--radius-full: 9999px;
/* Spacing */
--space-xs: 2px;
--space-sm: 4px;
--space: 6px;
--space-md: 8px;
--space-lg: 10px;
--space-xl: 12px;
--space-2xl: 16px;
/* Z-index layers */
--z-dropdown: 10;
--z-sticky: 20;
--z-fixed: 30;
--z-modal: 40;
--z-popover: 50;
--z-tooltip: 60;
}
/* Reset & Base Styles */
* {
margin: 0;
padding: 0;
box-sizing: border-box;
max-width: 100%;
}
html {
scroll-behavior: smooth;
font-size: 14px;
-webkit-tap-highlight-color: transparent;
-webkit-text-size-adjust: 100%;
}
body {
font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
background-color: var(--dark);
color: var(--light);
line-height: 1.4;
font-weight: 400;
overflow-x: hidden;
min-height: 100vh;
display: flex;
flex-direction: column;
-webkit-font-smoothing: antialiased;
-webkit-tap-highlight-color: rgba(0,0,0,0);
}
/* Improve text rendering */
h1, h2, h3, h4, h5, h6 {
font-weight: 600;
line-height: 1.2;
margin-bottom: 0.3em;
}
p {
margin-bottom: 0.5em;
}
a {
color: inherit;
text-decoration: none;
transition: var(--transition-fast);
}
a:hover {
color: var(--primary-light);
}
img {
max-width: 100%;
height: auto;
display: block;
}
button, input, select, textarea {
font-family: inherit;
font-size: inherit;
line-height: inherit;
}
button {
cursor: pointer;
border: none;
background: none;
transition: var(--transition);
}
ul, ol {
list-style: none;
}
/* T·ªëi ∆∞u cho touch devices */
button,
a,
select,
input,
.movie-card,
.watch-btn,
.carousel-btn,
.trending-button {
touch-action: manipulation;
}
/* Container */
.container {
width: 100%;
max-width: 1200px;
margin: 0 auto;
padding: 0 var(--space-md);
}
/* ==================== HEADER & NAVIGATION ==================== */
.header {
background: var(--dark);
position: sticky;
top: 0;
z-index: var(--z-sticky);
animation: slideDown 0.3s ease;
width: 100%;
padding: var(--space) 0;
border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}
@keyframes slideDown {
from { transform: translateY(-100%); }
to { transform: translateY(0); }
}
.header-content {
display: flex;
align-items: center;
gap: var(--space);
position: relative;
}
/* Logo - THU NH·ªé 30% */
.logo {
display: flex;
align-items: center;
gap: var(--space-xs);
text-decoration: none;
transition: var(--transition);
padding: 2px 6px;
min-height: 34px;
flex-shrink: 0;
background: transparent;
border-radius: 999px;
border: none;
box-shadow: none;
}
.logo:hover {
transform: translateY(-1px);
box-shadow: 0 12px 24px rgba(15, 23, 42, 0.95);
border-color: rgba(59, 130, 246, 0.9);
}
.logo-image-wrapper {
height: 34px;
display: flex;
align-items: center;
overflow: hidden;
}
.logo-image {
height: 46px;
width: auto;
object-fit: cover;
object-position: left top;
display: block;
filter: drop-shadow(0 0 12px rgba(59, 130, 246, 0.85));
}
.logo-icon {
width: 24px;
height: 24px;
background: var(--gradient-primary);
border-radius: var(--radius-sm);
display: flex;
align-items: center;
justify-content: center;
color: var(--white);
font-size: 0.8rem;
flex-shrink: 0;
}
.logo-text {
display: flex;
flex-direction: column;
}
.logo-main {
font-size: 1.12rem;
font-weight: 700;
color: var(--white);
line-height: 1;
letter-spacing: -0.3px;
}
.logo-sub {
font-size: 0.7rem;
font-weight: 500;
color: var(--primary-light);
letter-spacing: 0.12em;
text-transform: uppercase;
margin-top: 2px;
}
/* Search Bar - THU NH·ªé */
.search-container {
flex: 1;
position: relative;
}
.search-form {
position: relative;
width: 100%;
}
.search-input-container {
position: relative;
width: 100%;
}
.search-input {
width: 100%;
padding: var(--space) var(--space) var(--space) 36px;
background: rgba(255, 255, 255, 0.05);
border: 1px solid rgba(255, 255, 255, 0.08);
border-radius: var(--radius-lg);
font-size: 0.85rem;
transition: var(--transition);
color: var(--light);
font-weight: 400;
min-height: 34px;
}
.search-input:focus {
outline: none;
background: rgba(255, 255, 255, 0.08);
border-color: var(--primary);
box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
}
.search-input::placeholder {
color: var(--gray);
font-weight: 400;
font-size: 0.85rem;
}
.search-btn {
position: absolute;
left: var(--space);
top: 50%;
transform: translateY(-50%);
background: none;
border: none;
color: var(--gray);
cursor: pointer;
width: 16px;
height: 16px;
display: flex;
align-items: center;
justify-content: center;
transition: var(--transition);
min-height: 24px;
min-width: 24px;
}
.search-btn:hover {
color: var(--primary);
}
/* Search Suggestions */
.search-suggestions {
position: absolute;
top: 100%;
left: 0;
right: 0;
background: var(--darker);
border-radius: var(--radius);
box-shadow: var(--shadow-lg);
margin-top: var(--space-xs);
z-index: var(--z-dropdown);
display: none;
max-height: 300px;
overflow-y: auto;
border: 1px solid rgba(255, 255, 255, 0.1);
}
.search-suggestions.active {
display: block;
animation: fadeIn 0.2s ease;
}
.suggestion-header {
padding: var(--space) var(--space-md);
background: rgba(255, 255, 255, 0.05);
font-size: 0.8rem;
font-weight: 600;
color: var(--gray);
border-bottom: 1px solid rgba(255, 255, 255, 0.1);
display: flex;
justify-content: space-between;
align-items: center;
}
.suggestion-clear {
background: none;
border: none;
color: var(--danger);
font-size: 0.7rem;
cursor: pointer;
padding: var(--space-xs) var(--space-sm);
border-radius: var(--radius-sm);
transition: var(--transition-fast);
min-height: 24px;
}
.suggestion-clear:hover {
background: rgba(239, 68, 68, 0.1);
}
.suggestion-list {
max-height: 250px;
overflow-y: auto;
}
.suggestion-item {
padding: var(--space) var(--space-md);
display: flex;
align-items: center;
gap: var(--space);
cursor: pointer;
transition: var(--transition-fast);
border-bottom: 1px solid rgba(255, 255, 255, 0.05);
min-height: 36px;
}
.suggestion-item:last-child {
border-bottom: none;
}
.suggestion-item:hover {
background: rgba(255, 255, 255, 0.05);
}
.suggestion-item.active {
background: rgba(59, 130, 246, 0.1);
border-left: 2px solid var(--primary);
}
.suggestion-poster {
width: 32px;
height: 45px;
object-fit: cover;
border-radius: var(--radius-xs);
flex-shrink: 0;
}
.suggestion-info {
flex: 1;
min-width: 0;
}
.suggestion-title {
font-weight: 500;
color: var(--light);
margin-bottom: 1px;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
font-size: 0.8rem;
}
.suggestion-meta {
font-size: 0.7rem;
color: var(--gray);
display: flex;
gap: var(--space);
flex-wrap: wrap;
}
.suggestion-year {
color: var(--primary);
font-weight: 500;
}
.suggestion-category {
background: rgba(255, 255, 255, 0.1);
padding: 1px 4px;
border-radius: var(--radius-xs);
font-size: 0.6rem;
}
.search-history {
padding: var(--space) 0;
border-top: 1px solid rgba(255, 255, 255, 0.1);
}
.history-item {
padding: var(--space-xs) var(--space-md);
display: flex;
align-items: center;
justify-content: space-between;
cursor: pointer;
transition: var(--transition-fast);
min-height: 32px;
}
.history-item:hover {
background: rgba(255, 255, 255, 0.05);
}
.history-query {
display: flex;
align-items: center;
gap: var(--space);
color: var(--gray);
font-size: 0.8rem;
}
.history-query i {
font-size: 0.75rem;
}
.history-remove {
background: none;
border: none;
color: var(--danger);
cursor: pointer;
opacity: 0;
transition: var(--transition-fast);
min-height: 24px;
min-width: 24px;
padding: var(--space-xs);
}
.history-item:hover .history-remove {
opacity: 1;
}
/* Mobile Menu Toggle */
.mobile-menu-toggle {
display: none;
}
/* ==================== MAIN CONTENT ==================== */
.main-content {
flex: 1;
padding: var(--space-md) 0;
animation: fadeIn 0.5s ease;
width: 100%;
}
@keyframes fadeIn {
from { opacity: 0; }
to { opacity: 1; }
}
/* Section Titles - THU NH·ªé */
.section-title {
font-size: 1rem;
font-weight: 600;
margin-bottom: var(--space);
color: var(--light);
display: flex;
align-items: center;
gap: var(--space);
position: relative;
padding-bottom: var(--space-xs);
}
.section-title::after {
content: '';
position: absolute;
bottom: 0;
left: 0;
width: 24px;
height: 2px;
background: var(--gradient-primary);
border-radius: var(--radius-full);
}
.section-title i {
color: var(--primary);
font-size: 0.85rem;
}
/* ==================== TRENDING SECTION REDESIGN ==================== */
.trending-section {
    margin-bottom: var(--space-xl);
    position: relative;
    width: 100%;
    height: calc(100vh - 72px);
    min-height: 480px;
    max-height: none;
    overflow: hidden;
    border-radius: 0;
}
.trending-movie {
width: 100%;
height: 100%;
position: relative;
border-radius: var(--radius);
overflow: hidden;
}
.trending-poster {
width: 100%;
height: 100%;
position: relative;
overflow: hidden;
}
.trending-poster::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: linear-gradient(to bottom, rgba(15, 23, 42, 0.1) 0%, rgba(15, 23, 42, 0.7) 100%);
z-index: 1;
}
.trending-poster::after {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: linear-gradient(135deg, rgba(15, 23, 42, 0.4) 0%, transparent 50%, rgba(15, 23, 42, 0.2) 100%);
z-index: 1;
}
.trending-poster img {
width: 100%;
height: 100%;
object-fit: cover;
object-position: center 22%;
transition: var(--transition-slow);
}
.trending-info {
position: absolute;
bottom: var(--space);
left: var(--space);
right: var(--space);
z-index: 2;
max-width: 580px;
background: linear-gradient(to right, rgba(15,23,42,0.55), rgba(15,23,42,0.2));
padding: var(--space);
border-radius: var(--radius);
}
.trending-title {
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: var(--space-xs);
    color: var(--white);
    line-height: 1.2;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}
.trending-desc {
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: var(--space);
    line-height: 1.3;
    font-size: 0.9rem;
    max-width: 480px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    max-height: calc(1.3em * 3);
}
.trending-button {
display: inline-flex;
align-items: center;
gap: var(--space);
background: var(--gradient-primary);
color: var(--white);
padding: var(--space-xs) var(--space);
border-radius: var(--radius);
text-decoration: none;
font-weight: 600;
font-size: 0.8rem;
transition: var(--transition);
box-shadow: var(--shadow);
border: none;
position: relative;
overflow: hidden;
min-height: 28px;
}
.trending-button:hover {
transform: translateY(-1px);
box-shadow: var(--shadow-md);
}
.trending-button i {
font-size: 0.8rem;
}
/* Trending badge */
.trending-badge {
position: absolute;
top: var(--space);
left: var(--space);
background: var(--gradient-danger);
color: var(--white);
padding: 5px 10px;
border-radius: var(--radius-full);
font-weight: 700;
font-size: 0.8rem;
box-shadow: var(--shadow);
display: flex;
align-items: center;
gap: var(--space-xs);
z-index: 3;
letter-spacing: 0.3px;
}
.trending-badge i {
font-size: 0.85rem;
}
@media (max-width: 767px) {
    .trending-section {
        height: 52vh;
        min-height: 260px;
        max-height: 380px;
    }
    .trending-title {
        font-size: 1.2rem;
    }
    .trending-desc {
        font-size: 0.8rem;
        -webkit-line-clamp: 2;
        max-height: calc(1.3em * 2);
    }
}
/* Movies Carousel Sections */
.movies-section {
margin-bottom: var(--space-xl);
width: 100%;
}
.section-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: var(--space);
width: 100%;
}
.carousel-controls {
display: flex;
gap: var(--space-xs);
}
.carousel-btn {
width: 28px;
height: 28px;
border-radius: 50%;
border: 1px solid rgba(255, 255, 255, 0.2);
background: rgba(255, 255, 255, 0.05);
color: var(--light);
cursor: pointer;
transition: var(--transition);
display: flex;
align-items: center;
justify-content: center;
font-size: 0.85rem;
min-height: 28px;
min-width: 28px;
}
.carousel-btn:hover {
background: var(--primary);
color: var(--white);
border-color: var(--primary);
}
.movies-container {
overflow: hidden;
border-radius: var(--radius);
position: relative;
width: 100%;
}
.movies-carousel {
display: flex;
gap: var(--space);
transition: transform 0.3s ease;
padding: 1px;
will-change: transform;
flex-wrap: nowrap;
}
/* Movie Card Grid System - QUAN TR·ªåNG - THU NH·ªé */
.movie-card {
background: rgba(255, 255, 255, 0.05);
border-radius: var(--radius);
overflow: hidden;
transition: var(--transition);
position: relative;
display: flex;
flex-direction: column;
width: 100%;
border: 1px solid rgba(255, 255, 255, 0.05);
flex: 0 0 calc(33.333% - var(--space) * 2/3); /* 3 phim tr√™n 1 h√†ng */
}
.movie-card:hover {
transform: translateY(-2px);
background: rgba(255, 255, 255, 0.08);
border-color: rgba(255, 255, 255, 0.1);
}
.movie-poster {
width: 100%;
aspect-ratio: 2/3;
object-fit: cover;
background: linear-gradient(135deg, #334155 0%, #475569 100%);
}
.movie-info {
padding: var(--space-xs);
flex: 1;
display: flex;
flex-direction: column;
/* Th√™m flexbox cho movie-info */
justify-content: space-between;
min-height: 70px; /* T·∫°o chi·ªÅu cao t·ªëi thi·ªÉu */
}
.movie-title {
font-weight: 500;
margin-bottom: var(--space-xs);
color: var(--light);
font-size: 0.75rem;
line-height: 1.2;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
text-overflow: ellipsis;
min-height: 2.4em; /* ƒê·∫£m b·∫£o lu√¥n chi·∫øm 2 d√≤ng */
height: 2.4em; /* C·ªë ƒë·ªãnh chi·ªÅu cao 2 d√≤ng */
flex-shrink: 0; /* Kh√¥ng cho thu nh·ªè */
}
.movie-meta {
display: flex;
justify-content: space-between;
color: var(--gray);
font-size: 0.7rem;
margin-bottom: var(--space-xs);
align-items: center;
flex-wrap: wrap;
gap: var(--space-xs);
}
.watch-btn {
display: block;
width: 100%;
padding: var(--space-xs);
background: rgba(59, 130, 246, 0.1);
color: var(--primary-light);
border: 1px solid rgba(59, 130, 246, 0.2);
border-radius: var(--radius-xs);
font-weight: 500;
cursor: pointer;
transition: var(--transition);
text-align: center;
text-decoration: none;
font-size: 0.75rem;
display: flex;
align-items: center;
justify-content: center;
gap: var(--space-xs);
/* S·ª≠ d·ª•ng margin-top: auto ƒë·ªÉ ƒë·∫©y n√∫t xu·ªëng d∆∞·ªõi c√πng */
margin-top: auto;
min-height: 24px;
flex-shrink: 0; /* Kh√¥ng cho thu nh·ªè */
}
.watch-btn:hover {
background: rgba(59, 130, 246, 0.2);
border-color: rgba(59, 130, 246, 0.3);
}
/* All Movies Section */
.all-movies-section {
margin-bottom: var(--space-xl);
width: 100%;
}
.filter-controls {
display: flex;
gap: var(--space);
margin-bottom: var(--space);
flex-wrap: wrap;
width: 100%;
}
.filter-select {
padding: var(--space-xs) var(--space);
background: rgba(255, 255, 255, 0.05);
border: 1px solid rgba(255, 255, 255, 0.1);
border-radius: var(--radius);
color: var(--light);
font-size: 0.8rem;
min-width: 140px;
cursor: pointer;
transition: var(--transition);
font-weight: 400;
appearance: none;
background-image: url("image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
background-repeat: no-repeat;
background-position: right 8px center;
background-size: 12px;
padding-right: 30px;
min-height: 30px;
width: 100%;
}
.filter-select:focus {
outline: none;
background: rgba(255, 255, 255, 0.08);
border-color: var(--primary);
}
.filter-select option {
padding: var(--space-xs);
font-size: 0.8rem;
background: var(--darker);
}
/* GRID SYSTEM QUAN TR·ªåNG - 5 c·ªôt tr√™n mobile */
.all-movies-grid {
display: grid;
grid-template-columns: repeat(5, 1fr);
gap: 4px;
width: 100%;
}
/* C·∫≠p nh·∫≠t movie card cho grid */
.all-movies-grid .movie-card {
margin: 0;
border-radius: var(--radius-xs);
display: flex;
flex-direction: column;
height: 100%; /* ƒê·∫£m b·∫£o chi·ªÅu cao 100% */
}
.all-movies-grid .movie-poster {
aspect-ratio: 2/3;
}
.all-movies-grid .movie-info {
padding: 3px;
flex: 1;
display: flex;
flex-direction: column;
justify-content: space-between;
min-height: 50px; /* Chi·ªÅu cao t·ªëi thi·ªÉu */
}
.all-movies-grid .movie-title {
font-size: 0.7rem;
min-height: 2.2em; /* 2 d√≤ng cho grid */
height: 2.2em;
margin-bottom: 0;
line-height: 1.1;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
text-overflow: ellipsis;
flex-shrink: 0;
}
.all-movies-grid .movie-meta {
display: none;
}
.all-movies-grid .watch-btn {
padding: 2px;
font-size: 0.7rem;
min-height: 22px;
margin-top: auto; /* ƒê·∫©y n√∫t xu·ªëng d∆∞·ªõi c√πng */
flex-shrink: 0;
}
.no-movies {
grid-column: 1 / -1;
text-align: center;
padding: var(--space-xl);
color: var(--gray);
background: rgba(255, 255, 255, 0.05);
border-radius: var(--radius);
}
.no-movies i {
font-size: 2rem;
margin-bottom: var(--space);
color: rgba(255, 255, 255, 0.1);
display: block;
}
/* Search Results Header */
.search-results-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: var(--space);
padding: var(--space) var(--space);
background: rgba(59, 130, 246, 0.1);
border-radius: var(--radius);
border-left: 2px solid var(--primary);
flex-wrap: wrap;
gap: var(--space);
width: 100%;
}
.search-results-info h3 {
font-size: 0.9rem;
color: var(--light);
margin-bottom: var(--space-xs);
}
.search-results-info p {
color: var(--gray);
font-size: 0.8rem;
}
.search-results-actions {
display: flex;
gap: var(--space-xs);
}
.clear-search-btn {
padding: var(--space-xs) var(--space);
background: rgba(255, 255, 255, 0.1);
color: var(--light);
border-radius: var(--radius-xs);
font-size: 0.75rem;
font-weight: 500;
transition: var(--transition-fast);
display: flex;
align-items: center;
gap: var(--space-xs);
min-height: 28px;
}
.clear-search-btn:hover {
background: rgba(255, 255, 255, 0.15);
}
/* ==================== FOOTER - B·∫¢N CHU·∫®N ƒê∆†N GI·∫¢N ==================== */
.footer {
background: var(--darker);
color: var(--light);
padding: var(--space-xl) 0 var(--space-md);
margin-top: auto;
width: 100%;
border-top: 1px solid rgba(255, 255, 255, 0.1);
}
.footer::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 3px;
background: var(--gradient-primary);
}
.footer-content {
display: flex;
flex-direction: column;
align-items: center;
gap: var(--space-md);
padding: 0 var(--space-md);
max-width: 1200px;
margin: 0 auto;
width: 100%;
}
.footer-logo {
display: flex;
align-items: center;
gap: var(--space);
text-decoration: none;
margin-bottom: var(--space);
}
.footer-logo-image {
height: 50px;
width: auto;
object-fit: cover;
object-position: left top;
display: block;
filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.7));
}
.footer-logo-icon {
width: 32px;
height: 32px;
background: var(--gradient-primary);
border-radius: var(--radius-sm);
display: flex;
align-items: center;
justify-content: center;
color: var(--white);
font-size: 1rem;
}
.footer-logo-text {
font-size: 1.2rem;
font-weight: 700;
color: var(--white);
letter-spacing: -0.5px;
}
/* Li√™n h·ªá Facebook */
.footer-contact {
text-align: center;
margin-bottom: var(--space-md);
}
.contact-facebook {
display: flex;
flex-direction: column;
align-items: center;
gap: var(--space-sm);
}
.fanpage-link {
color: var(--primary-light);
text-decoration: none;
font-weight: 500;
font-size: 0.9rem;
transition: var(--transition);
display: inline-flex;
align-items: center;
gap: var(--space-xs);
}
.fanpage-link:hover {
color: var(--white);
transform: translateX(3px);
}
.fanpage-link i {
font-size: 0.85rem;
}
/* B·∫£n quy·ªÅn - nh·ªè g·ªçn ·ªü cu·ªëi */
.copyright {
text-align: center;
padding-top: var(--space);
color: var(--gray);
font-size: 0.75rem;
width: 100%;
border-top: 1px solid rgba(255, 255, 255, 0.05);
margin-top: var(--space-md);
line-height: 1.4;
}
/* ==================== RESPONSIVE FOOTER ==================== */
@media (max-width: 767px) {
.footer-content {
gap: var(--space-lg);
}
.footer-logo-text {
font-size: 1.1rem;
}
.copyright {
font-size: 0.7rem;
}
}
@media (min-width: 768px) {
.footer-content {
flex-direction: row;
justify-content: space-between;
align-items: center;
}
.footer-logo {
margin-bottom: 0;
}
.footer-contact {
margin-bottom: 0;
margin-left: auto;
}
.copyright {
width: auto;
margin-top: 0;
border-top: none;
padding-top: 0;
}
}
/* ==================== RESPONSIVE DESIGN ==================== */
/* Tablet Landscape (992px - 1199px) */
@media (min-width: 992px) {
.all-movies-grid {
grid-template-columns: repeat(5, 1fr);
gap: var(--space);
}
.movie-card {
flex: 0 0 calc(16.666% - var(--space) * 5/6);
}
.movies-carousel {
gap: var(--space);
}
.trending-info {
left: var(--space-xl);
right: var(--space-xl);
}
.trending-title {
font-size: 1.5rem;
}
}
/* Tablet Portrait (768px - 991px) */
@media (min-width: 768px) and (max-width: 991px) {
.all-movies-grid {
grid-template-columns: repeat(5, 1fr);
gap: var(--space-sm);
}
.movie-card {
flex: 0 0 calc(20% - var(--space) * 4/5);
}
.trending-info {
left: var(--space);
right: var(--space);
}
.trending-title {
font-size: 1.3rem;
}
}
/* Mobile Landscape (576px - 767px) */
@media (max-width: 767px) {
body {
font-size: 13px;
}
.container {
padding: 0 var(--space);
max-width: 100%;
}
.header {
padding: var(--space-xs) 0;
}
.header-content {
flex-wrap: wrap;
gap: var(--space);
}
.logo {
order: 1;
}
.search-container {
order: 3;
width: 100%;
margin-top: var(--space-xs);
}
.logo-main {
font-size: 0.8rem;
}
.logo-icon {
width: 20px;
height: 20px;
font-size: 0.7rem;
}
.search-input {
font-size: 14px;
padding: 6px 6px 6px 30px;
}
.trending-section {
    height: 32vh;
    min-height: 190px;
    max-height: 230px;
    margin-bottom: var(--space);
}
.trending-info {
left: var(--space);
right: var(--space);
bottom: var(--space);
}
.trending-title {
font-size: 1rem;
}
.trending-desc {
font-size: 0.7rem;
margin-bottom: var(--space-xs);
}
.trending-button {
padding: 4px 8px;
font-size: 0.7rem;
min-height: 24px;
}
.all-movies-grid {
grid-template-columns: repeat(5, 1fr);
gap: 3px;
}
.movies-carousel {
gap: 4px;
}
.movie-card {
flex: 0 0 calc(33.333% - 4px * 2/3);
}
.section-title {
font-size: 0.9rem;
margin-bottom: var(--space-xs);
}
.section-header {
flex-direction: column;
align-items: flex-start;
gap: var(--space-xs);
}
.carousel-controls {
margin-top: var(--space-xs);
width: 100%;
justify-content: center;
}
.filter-controls {
flex-direction: column;
gap: var(--space-xs);
}
.filter-select {
min-width: 100%;
width: 100%;
}
.main-content {
padding: var(--space-xs) 0;
}
}
/* Mobile Portrait (320px - 575px) */
@media (max-width: 575px) {
.trending-section {
    height: 28vh;
    min-height: 180px;
}
.trending-title {
font-size: 0.9rem;
}
.trending-button {
padding: 3px 6px;
font-size: 0.65rem;
}
.trending-badge {
top: 4px;
left: 4px;
padding: 2px 4px;
font-size: 0.6rem;
}
.all-movies-grid {
grid-template-columns: repeat(5, 1fr);
gap: 2px;
}
.all-movies-grid .movie-info {
padding: 2px;
}
.all-movies-grid .movie-title {
font-size: 0.65rem;
min-height: 2em; /* 2 d√≤ng */
height: 2em;
line-height: 1;
}
.all-movies-grid .watch-btn {
padding: 1px;
font-size: 0.65rem;
min-height: 20px;
margin-top: auto; /* ƒê·∫£m b·∫£o ƒë·∫©y xu·ªëng d∆∞·ªõi c√πng */
}
.section-title {
font-size: 0.85rem;
}
.footer-logo-icon {
width: 28px;
height: 28px;
}
.footer-logo-text {
font-size: 1rem;
}
}
/* Small Mobile (320px - 375px) */
@media (max-width: 375px) {
.all-movies-grid {
grid-template-columns: repeat(5, 1fr);
gap: 2px;
}
.trending-button {
width: 100%;
justify-content: center;
}
.logo-main {
font-size: 0.75rem;
}
.movie-card {
flex: 0 0 calc(50% - 4px * 1/2);
}
}
/* T·ªëi ∆∞u cho iOS Safari */
@supports (-webkit-touch-callout: none) {
.search-input,
.filter-select {
font-size: 14px;
}
}
/* T·ªëi ∆∞u cho landscape mode */
@media (max-height: 500px) and (orientation: landscape) {
.trending-section {
height: 50vh;
}
.trending-info {
bottom: var(--space-xs);
}
}
/* Print Styles */
@media print {
.carousel-controls,
.search-container,
.footer {
display: none !important;
}
body {
background: white;
color: black;
font-size: 10pt;
}
.container {
max-width: 100%;
padding: 0;
}
.movie-card {
break-inside: avoid;
box-shadow: none;
border: 1px solid #ddd;
}
}
/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
*,
*::before,
*::after {
animation-duration: 0.01ms !important;
animation-iteration-count: 1 !important;
transition-duration: 0.01ms !important;
scroll-behavior: auto !important;
}
}
/* Touch Device Optimizations */
@media (hover: none) and (pointer: coarse) {
.movie-card:hover {
transform: none;
}
.carousel-btn:hover {
transform: none;
}
.trending-button:hover {
transform: none;
}
.suggestion-item:hover {
background: transparent;
}
.suggestion-item:active {
background: rgba(59, 130, 246, 0.1);
}
.history-remove {
opacity: 1;
}
}
/* Custom Scrollbar */
.custom-scrollbar::-webkit-scrollbar {
width: 4px;
height: 4px;
}
.custom-scrollbar::-webkit-scrollbar-track {
background: rgba(255, 255, 255, 0.05);
border-radius: var(--radius-full);
}
.custom-scrollbar::-webkit-scrollbar-thumb {
background: var(--primary);
border-radius: var(--radius-full);
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
background: var(--primary-dark);
}
@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}
</style>
</head>
<body>
<!-- HEADER -->
<header class="header">
<div class="container">
<div class="header-content">
<a href="#" class="logo">
<div class="logo-image-wrapper">
<img src="logo-npv.png" alt="NguonPhimVIP - Xem phim ch·∫•t l∆∞·ª£ng cao" class="logo-image">
</div>
<div class="logo-text">
<span class="logo-main">NGUONPHIMVIP</span>
<span class="logo-sub">Xem phim ch·∫•t l∆∞·ª£ng cao</span>
</div>
</a>
<!-- SEARCH BAR -->
<div class="search-container">
<form class="search-form" id="searchForm">
<div class="search-input-container">
<input type="text" class="search-input" id="searchInput" placeholder="T√¨m ki·∫øm phim theo t√™n, th·ªÉ lo·∫°i, di·ªÖn vi√™n..." autocomplete="off">
<button type="submit" class="search-btn" id="searchButton">
<i class="fas fa-search"></i>
</button>
</div>
<div class="search-suggestions custom-scrollbar" id="searchSuggestions">
<div class="suggestion-header">
<span>G·ª£i √Ω t√¨m ki·∫øm</span>
<button type="button" class="suggestion-clear" id="clearSuggestions">
<i class="fas fa-times"></i> X√≥a
</button>
</div>
<div class="suggestion-list" id="suggestionList">
<!-- Suggestions will be populated here -->
</div>
<div class="search-history" id="searchHistory">
<!-- Search history will be populated here -->
</div>
</div>
</form>
</div>
</div>
</div>
</header>
<!-- MAIN CONTENT -->
<main class="main-content">
<div class="container">
<!-- TOP 1 TRENDING REDESIGN -->
<section class="trending-section fade-in">
<div class="trending-movie" id="trendingMovie">
<div class="loading">
<p><i class="fas fa-spinner"></i> ƒêang t·∫£i phim trending...</p>
</div>
</div>
</section>
<!-- PHIM M·ªöI -->
<section class="movies-section fade-in">
<div class="section-header">
<h2 class="section-title"><i class="fas fa-bolt"></i> Phim M·ªõi</h2>
<div class="carousel-controls">
<button class="carousel-btn prev-btn" id="newPrevBtn">
<i class="fas fa-chevron-left"></i>
</button>
<button class="carousel-btn next-btn" id="newNextBtn">
<i class="fas fa-chevron-right"></i>
</button>
</div>
</div>
<div class="movies-container">
<div class="movies-carousel" id="newMoviesCarousel">
<!-- Skeleton loading s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
</div>
</div>
</section>
<!-- T·∫§T C·∫¢ PHIM -->
<section class="all-movies-section fade-in" id="allMoviesSection">
<div class="section-header">
<h2 class="section-title"><i class="fas fa-list"></i> T·∫•t c·∫£ phim</h2>
<div class="filter-controls">
<select class="filter-select" id="categoryFilter">
<option value="">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>
</select>
<select class="filter-select" id="sortFilter">
<option value="newest">M·ªõi nh·∫•t</option>
<option value="oldest">C≈© nh·∫•t</option>
<option value="rating">ƒê√°nh gi√° cao</option>
<option value="title">Theo t√™n A-Z</option>
</select>
</div>
</div>
<!-- Search Results Header (hidden by default) -->
<div class="search-results-header" id="searchResultsHeader" style="display: none;">
<div class="search-results-info">
<h3 id="searchResultsTitle">K·∫øt qu·∫£ t√¨m ki·∫øm</h3>
<p id="searchResultsCount">T√¨m th·∫•y 0 phim</p>
</div>
<div class="search-results-actions">
<button class="clear-search-btn" id="clearSearchResults">
<i class="fas fa-times"></i> X√≥a t√¨m ki·∫øm
</button>
</div>
</div>
<div class="all-movies-grid" id="allMoviesGrid">
<!-- Skeleton loading s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
</div>
</section>
</div>
</main>
<!-- FOOTER - PHI√äN B·∫¢N ƒê∆†N GI·∫¢N THEO Y√äU C·∫¶U -->
<footer class="footer">
    <div class="footer-content">
        <div class="footer-logo">
            <div class="logo-image-wrapper">
                <img src="logo-npv.png" alt="NguonPhimVIP" class="logo-image footer-logo-image">
            </div>
        </div>
        
        <!-- Li√™n h·ªá Facebook -->
        <div class="footer-contact">
            <div class="contact-facebook">
                <a href="#" class="fanpage-link" target="_blank">
                    <i class="fab fa-facebook"></i> Facebook Fanpage
                </a>
            </div>
        </div>
        
        <!-- B·∫£n quy·ªÅn - ·ªü cu·ªëi, nh·ªè g·ªçn -->
        <div class="copyright">
            &copy; 2026 NguonPhimVIP. All rights reserved.
        </div>
    </div>
</footer>
<script>
const firebaseConfig = {
apiKey: "AIzaSyCFfa_7SSxy8DQngWBCck36W9c_QdR6QV4",
authDomain: "nguonphimvip.firebaseapp.com",
projectId: "nguonphimvip",
storageBucket: "nguonphimvip.firebasestorage.app",
messagingSenderId: "844131201188",
appId: "1:844131201188:web:f982705ad4a096b258b631"
};
if (!firebase.apps.length) {
firebase.initializeApp(firebaseConfig);
} else {
firebase.app();
}
const db = firebase.firestore();

// ==================== KKPHIM API CONFIGURATION ====================
const KKPHIM_API_BASE = 'https://phimapi.com';
const KKPHIM_IMAGE_PROXY = 'https://phimapi.com/image.php?url=';

// ==================== KKPHIM API HELPER FUNCTIONS ====================
// Strip HTML tags from string
function stripHtmlTags(str) {
    if (!str) return '';
    return str.replace(/<[^>]*>/g, '');
}

// Chu·∫©n h√≥a URL ·∫£nh t·ª´ KKPHIM (d√πng tr·ª±c ti·∫øp domain ·∫£nh thay v√¨ proxy)
function convertImageToWebP(imageUrl) {
    if (!imageUrl) return 'https://via.placeholder.com/300x450?text=No+Image';
    let url = imageUrl.trim();

    // N·∫øu API tr·∫£ v·ªÅ d·∫°ng //img.phimapi.com/..., th√™m protocol
    if (url.startsWith('//')) {
        url = 'https:' + url;
    }

    // N·∫øu kh√¥ng c√≥ http/https th√¨ coi l√† path t∆∞∆°ng ƒë·ªëi t·ª´ KKPHIM
    if (!/^https?:\/\//i.test(url)) {
        if (url.startsWith('/')) {
            url = 'https://img.phimapi.com' + url;
        } else {
            url = 'https://img.phimapi.com/' + url;
        }
    }

    return url;
}

// Map KKPhim API response to our movie format
function mapKKPhimMovieToLocal(kkphimMovie) {
    const categoryName = kkphimMovie.category && kkphimMovie.category.length > 0 
        ? (kkphimMovie.category[0].name || kkphimMovie.category[0]) 
        : (kkphimMovie.category || 'Ch∆∞a ph√¢n lo·∫°i');
    
    // Check various poster fields - prioritize thumb_url if poster_url is missing
    let posterUrl = kkphimMovie.poster_url || kkphimMovie.thumb_url || kkphimMovie.poster || '';
    
    // Handle specific API v1/v2/v3 discrepancies
    if (!posterUrl && kkphimMovie.items && kkphimMovie.items.length > 0) {
       // Sometimes data is nested
    }

    // Ensure description fallback
    let description = kkphimMovie.content || kkphimMovie.description || '';
    if (!description && kkphimMovie.body) description = kkphimMovie.body;

    return {
        id: kkphimMovie.slug || kkphimMovie._id || kkphimMovie.id,
        slug: kkphimMovie.slug || kkphimMovie._id,
        title: kkphimMovie.name || kkphimMovie.title,
        category: categoryName,
        description: stripHtmlTags(description),
        year: kkphimMovie.year || null,
        rating: kkphimMovie.rating?.average || kkphimMovie.rating || null,
        poster: convertImageToWebP(posterUrl),
        episodes: kkphimMovie.episodes || kkphimMovie.episode_list || [],
        modified: kkphimMovie.modified?.time || kkphimMovie.createdAt || new Date().toISOString(),
        status: kkphimMovie.status || 'ƒêang chi·∫øu'
    };
}

// Fetch from KKPhim API with error handling
async function fetchKKPhimAPI(url) {
try {
const response = await fetch(url);
if (!response.ok) {
throw new Error(`HTTP error! status: ${response.status}`);
}
const data = await response.json();
return data;
} catch (error) {
console.error('‚ùå L·ªói khi fetch KKPhim API:', error);
throw error;
}
}
// ==================== GLOBAL VARIABLES ====================
let allMovies = [];
let trendingMovie = null;
let currentNewIndex = 0;
let maxNewIndex = 0;
let isSearching = false;
let currentSearchQuery = '';
let cardWidth = 100;
let gap = 4;
// ==================== DOM ELEMENTS ====================
const trendingContainer = document.getElementById('trendingMovie');
const newMoviesCarousel = document.getElementById('newMoviesCarousel');
const allMoviesGrid = document.getElementById('allMoviesGrid');
const categoryFilter = document.getElementById('categoryFilter');
const sortFilter = document.getElementById('sortFilter');
const newPrevBtn = document.getElementById('newPrevBtn');
const newNextBtn = document.getElementById('newNextBtn');
// ==================== SEARCH SYSTEM ====================
class SearchSystem {
constructor() {
this.searchInput = document.getElementById('searchInput');
this.searchForm = document.getElementById('searchForm');
this.searchSuggestions = document.getElementById('searchSuggestions');
this.suggestionList = document.getElementById('suggestionList');
this.searchHistory = document.getElementById('searchHistory');
this.clearSuggestions = document.getElementById('clearSuggestions');
this.searchResultsHeader = document.getElementById('searchResultsHeader');
this.searchResultsTitle = document.getElementById('searchResultsTitle');
this.searchResultsCount = document.getElementById('searchResultsCount');
this.clearSearchResults = document.getElementById('clearSearchResults');
this.searchHistoryData = JSON.parse(localStorage.getItem('nguonphimvip_search_history')) || [];
this.maxHistoryItems = 10;
this.suggestionLimit = 8;
this.debounceTimeout = null;
this.currentSuggestionIndex = -1;
this.init();
}
init() {
this.loadSearchHistory();
this.searchInput.addEventListener('input', (e) => this.handleInput(e));
this.searchInput.addEventListener('keydown', (e) => this.handleKeyDown(e));
this.searchInput.addEventListener('focus', () => this.showSuggestions());
this.searchForm.addEventListener('submit', (e) => this.handleSubmit(e));
this.clearSuggestions.addEventListener('click', () => this.clearAllHistory());
this.clearSearchResults.addEventListener('click', () => this.clearSearch());
document.addEventListener('click', (e) => {
if (!this.searchForm.contains(e.target)) {
this.hideSuggestions();
}
});
// C·∫£i thi·ªán tr·∫£i nghi·ªám tr√™n mobile
this.searchInput.addEventListener('touchstart', (e) => {
e.stopPropagation();
});
}
handleInput(e) {
const query = e.target.value.trim();
if (this.debounceTimeout) {
clearTimeout(this.debounceTimeout);
}
this.debounceTimeout = setTimeout(() => {
if (query.length >= 2) {
this.showSuggestions();
this.generateSuggestions(query);
} else {
this.showSuggestions();
this.showHistory();
}
}, 300);
}
handleKeyDown(e) {
const suggestions = this.suggestionList.querySelectorAll('.suggestion-item');
switch (e.key) {
case 'ArrowDown':
e.preventDefault();
this.navigateSuggestions(1);
break;
case 'ArrowUp':
e.preventDefault();
this.navigateSuggestions(-1);
break;
case 'Enter':
if (this.currentSuggestionIndex >= 0 && this.currentSuggestionIndex < suggestions.length) {
e.preventDefault();
suggestions[this.currentSuggestionIndex].click();
}
break;
case 'Escape':
this.hideSuggestions();
break;
}
}
navigateSuggestions(direction) {
const suggestions = this.suggestionList.querySelectorAll('.suggestion-item');
if (suggestions.length === 0) return;
if (this.currentSuggestionIndex >= 0) {
suggestions[this.currentSuggestionIndex].classList.remove('active');
}
this.currentSuggestionIndex += direction;
if (this.currentSuggestionIndex < 0) {
this.currentSuggestionIndex = suggestions.length - 1;
} else if (this.currentSuggestionIndex >= suggestions.length) {
this.currentSuggestionIndex = 0;
}
suggestions[this.currentSuggestionIndex].classList.add('active');
suggestions[this.currentSuggestionIndex].scrollIntoView({
block: 'nearest'
});
}
handleSubmit(e) {
e.preventDefault();
const query = this.searchInput.value.trim();
if (query) {
this.performSearch(query);
this.hideSuggestions();
}
}
async generateSuggestions(query) {
if (!query || query.length < 2) {
this.showHistory();
return;
}
try {
const response = await fetchKKPhimAPI(`${KKPHIM_API_BASE}/v1/api/tim-kiem?keyword=${encodeURIComponent(query)}&page=1&limit=${this.suggestionLimit}`);
const data = response.data || response;
const searchData = Array.isArray(data.items) ? data.items : [];
const suggestions = searchData.map(movie => mapKKPhimMovieToLocal(movie));

if (suggestions.length === 0) {
this.suggestionList.innerHTML = `
<div class="suggestion-item" style="justify-content: center; color: var(--gray); padding: var(--space);">
<i class="fas fa-search" style="margin-right: 6px;"></i>
Kh√¥ng t√¨m th·∫•y phim ph√π h·ª£p
</div>
`;
return;
}

this.suggestionList.innerHTML = suggestions.map((movie, index) => {
const posterUrl = convertImageToWebP(movie.poster || '');
return `
<div class="suggestion-item ${index === 0 ? 'active' : ''}" data-slug="${movie.slug || movie.id}" data-title="${movie.title}">
<img src="${posterUrl || 'https://via.placeholder.com/32x45/1d4ed8/ffffff?text=No+Image'}"
alt="${movie.title}"
class="suggestion-poster"
onerror="this.src='https://via.placeholder.com/32x45/1d4ed8/ffffff?text=No+Image'">
<div class="suggestion-info">
<div class="suggestion-title">${movie.title}</div>
<div class="suggestion-meta">
<span class="suggestion-year">${movie.year || 'N/A'}</span>
<span class="suggestion-category">${movie.category || 'N/A'}</span>
</div>
</div>
</div>
`;
}).join('');

this.suggestionList.querySelectorAll('.suggestion-item').forEach(item => {
item.addEventListener('click', () => {
const movieSlug = item.dataset.slug;
const movieTitle = item.dataset.title;
this.searchInput.value = movieTitle;
this.performSearch(movieTitle);
this.hideSuggestions();
});
});
this.currentSuggestionIndex = 0;
} catch (error) {
console.error('‚ùå L·ªói khi t√¨m ki·∫øm suggestions:', error);
this.suggestionList.innerHTML = `
<div class="suggestion-item" style="justify-content: center; color: var(--gray); padding: var(--space);">
<i class="fas fa-exclamation-triangle" style="margin-right: 6px;"></i>
L·ªói khi t√¨m ki·∫øm
</div>
`;
}
}
showHistory() {
if (this.searchHistoryData.length === 0) {
this.searchHistory.style.display = 'none';
return;
}
this.searchHistory.style.display = 'block';
this.searchHistory.innerHTML = this.searchHistoryData.map(item => `
<div class="history-item" data-query="${item.query}">
<div class="history-query">
<i class="fas fa-history"></i>
<span>${item.query}</span>
</div>
<button class="history-remove" title="X√≥a">
<i class="fas fa-times"></i>
</button>
</div>
`).join('');
this.searchHistory.querySelectorAll('.history-item').forEach(item => {
const query = item.dataset.query;
item.addEventListener('click', (e) => {
if (!e.target.closest('.history-remove')) {
this.searchInput.value = query;
this.performSearch(query);
this.hideSuggestions();
}
});
const removeBtn = item.querySelector('.history-remove');
removeBtn.addEventListener('click', (e) => {
e.stopPropagation();
this.removeFromHistory(query);
});
});
}
loadSearchHistory() {
this.showHistory();
}
addToHistory(query) {
this.searchHistoryData = this.searchHistoryData.filter(item => item.query.toLowerCase() !== query.toLowerCase());
this.searchHistoryData.unshift({
query: query,
timestamp: Date.now()
});
if (this.searchHistoryData.length > this.maxHistoryItems) {
this.searchHistoryData = this.searchHistoryData.slice(0, this.maxHistoryItems);
}
localStorage.setItem('nguonphimvip_search_history', JSON.stringify(this.searchHistoryData));
this.showHistory();
}
removeFromHistory(query) {
this.searchHistoryData = this.searchHistoryData.filter(item => item.query.toLowerCase() !== query.toLowerCase());
localStorage.removeItem('nguonphimvip_search_history');
this.showHistory();
}
clearAllHistory() {
if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ t√¨m ki·∫øm?')) {
this.searchHistoryData = [];
localStorage.removeItem('nguonphimvip_search_history');
this.showHistory();
}
}
async performSearch(query) {
if (!query.trim()) {
this.clearSearch();
return;
}
currentSearchQuery = query.trim();
isSearching = true;
this.addToHistory(query);
this.searchResultsHeader.style.display = 'flex';
this.searchResultsTitle.textContent = `ƒêang t√¨m ki·∫øm: "${query}"...`;
this.searchResultsCount.textContent = 'ƒêang t·∫£i...';
allMoviesGrid.innerHTML = createSkeleton(12);

try {
const response = await fetchKKPhimAPI(`${KKPHIM_API_BASE}/v1/api/tim-kiem?keyword=${encodeURIComponent(query)}&page=1&limit=100`);
const data = response.data || response;
const searchData = Array.isArray(data.items) ? data.items : [];
const searchResults = searchData.map(movie => mapKKPhimMovieToLocal(movie));

this.searchResultsTitle.textContent = `K·∫øt qu·∫£ t√¨m ki·∫øm: "${query}"`;
this.searchResultsCount.textContent = `T√¨m th·∫•y ${searchResults.length} phim`;

if (searchResults.length === 0) {
allMoviesGrid.innerHTML = `
<div class="no-movies">
<i class="fas fa-search"></i>
<h3>Kh√¥ng t√¨m th·∫•y phim ph√π h·ª£p</h3>
<p>Kh√¥ng c√≥ phim n√†o kh·ªõp v·ªõi t·ª´ kh√≥a "${query}"</p>
</div>
`;
} else {
// Sort results: phim c√≥ title ch·ª©a keyword ·ªü ƒë·∫ßu
const normalizedQuery = query.toLowerCase();
searchResults.sort((a, b) => {
const aInTitle = a.title.toLowerCase().includes(normalizedQuery);
const bInTitle = b.title.toLowerCase().includes(normalizedQuery);
if (aInTitle && !bInTitle) return -1;
if (!aInTitle && bInTitle) return 1;
return (b.rating || 0) - (a.rating || 0);
});
displayMovies(searchResults, allMoviesGrid, true);
}
this.searchResultsHeader.scrollIntoView({
behavior: 'smooth',
block: 'start'
});
} catch (error) {
console.error('‚ùå L·ªói khi t√¨m ki·∫øm:', error);
this.searchResultsTitle.textContent = `L·ªói t√¨m ki·∫øm: "${query}"`;
this.searchResultsCount.textContent = 'Kh√¥ng th·ªÉ t·∫£i k·∫øt qu·∫£';
allMoviesGrid.innerHTML = `
<div class="no-movies">
<i class="fas fa-exclamation-triangle"></i>
<h3>L·ªói khi t√¨m ki·∫øm</h3>
<p>Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
</div>
`;
}
}
clearSearch() {
isSearching = false;
currentSearchQuery = '';
this.searchInput.value = '';
this.searchResultsHeader.style.display = 'none';
updateAllMovies();
this.hideSuggestions();
}
showSuggestions() {
this.searchSuggestions.classList.add('active');
this.searchInput.focus();
}
hideSuggestions() {
this.searchSuggestions.classList.remove('active');
this.currentSuggestionIndex = -1;
}
}
// ==================== INITIALIZE SEARCH SYSTEM ====================
const searchSystem = new SearchSystem();
// ==================== UTILITY FUNCTIONS ====================
function createSkeleton(count) {
let skeletonHTML = '';
for (let i = 0; i < count; i++) {
skeletonHTML += `
<div class="movie-card skeleton">
<div class="movie-poster skeleton-poster"></div>
<div class="movie-info">
<div class="movie-title skeleton-title"></div>
<div class="watch-btn skeleton-button"></div>
</div>
</div>
`;
}
return skeletonHTML;
}
function stripHtmlTags(content) {
if (!content) return '';
return content.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim();
}
function calculateVisibleMovies() {
const container = document.querySelector('.movies-container');
if (!container || !container.offsetWidth) return 3;
const containerWidth = container.offsetWidth;
const movieCard = document.querySelector('.movie-card');
if (movieCard && movieCard.offsetWidth) {
cardWidth = movieCard.offsetWidth;
}
if (window.innerWidth >= 1440) return 6;
if (window.innerWidth >= 1200) return 5;
if (window.innerWidth >= 992) return 4;
if (window.innerWidth >= 768) return 4;
if (window.innerWidth >= 576) return 3;
return 3;
}
function updateCarouselPosition() {
const card = document.querySelector('.movie-card');
if (!card) return;
if (card.offsetWidth) {
cardWidth = card.offsetWidth;
}
newMoviesCarousel.style.transform = `translateX(-${currentNewIndex * (cardWidth + gap)}px)`;
}
function calculateMaxIndex() {
const totalVisible = calculateVisibleMovies();
const newMoviesCount = newMoviesCarousel.children.length;
maxNewIndex = Math.max(0, newMoviesCount - totalVisible);
if (currentNewIndex > maxNewIndex) currentNewIndex = maxNewIndex;
}
// ==================== DATA LOADING FROM KKPHIM API ====================
async function loadData() {
console.log('=== B·∫ÆT ƒê·∫¶U T·∫¢I D·ªÆ LI·ªÜU T·ª™ KKPHIM API ===');
try {
const newMoviesResponse = await fetchKKPhimAPI(`${KKPHIM_API_BASE}/danh-sach/phim-moi-cap-nhat-v3?page=1`);
console.log('üì¶ Response t·ª´ API V3:', newMoviesResponse);
const newMoviesData = newMoviesResponse.items || newMoviesResponse.data || [];
allMovies = newMoviesData.map(movie => mapKKPhimMovieToLocal(movie));
console.log(`‚úÖ ƒê√£ t·∫£i ${allMovies.length} phim t·ª´ KKPhim API V3`);
let trendingSlug = null;
if (typeof firebase !== 'undefined' && typeof db !== 'undefined') {
try {
const trendingDoc = await db.collection("trending").doc("current").get();
if (trendingDoc.exists) {
const data = trendingDoc.data();
if (data.movieSlug) {
trendingSlug = data.movieSlug;
}
}
} catch (e) {
console.error('‚ö†Ô∏è Failed to load trending from Firebase:', e);
}
}
if (!trendingSlug) {
const adminPrefs = JSON.parse(localStorage.getItem('nguonphimvip_admin_prefs'));
if (adminPrefs && adminPrefs.trendingMovieSlug) {
trendingSlug = adminPrefs.trendingMovieSlug;
}
}
if (trendingSlug) {
try {
console.log('üîç Loading Trending by slug:', trendingSlug);
const trendingResponse = await fetchKKPhimAPI(`${KKPHIM_API_BASE}/phim/${trendingSlug}`);
const trendingData = trendingResponse.movie || trendingResponse.item || (trendingResponse.data ? trendingResponse.data.item : null);
if (trendingData) {
trendingMovie = mapKKPhimMovieToLocal(trendingData);
console.log('üî• Loaded Trending:', trendingMovie.title);
}
} catch (e) {
console.error('‚ö†Ô∏è Failed to load trending movie:', e);
}
}
// 2. Fallback: N·∫øu ch∆∞a c√≥ trendingMovie (do admin ch∆∞a set ho·∫∑c l·ªói), l·∫•y phim m·ªõi nh·∫•t
            if (!trendingMovie) {
                if (allMovies.length > 0) {
                    trendingMovie = allMovies[0];
                    // Ensure full details for trending movie (especially description)
                    try {
                        const trendingDetail = await fetchKKPhimAPI(`${KKPHIM_API_BASE}/phim/${trendingMovie.slug}`);
                        if (trendingDetail && (trendingDetail.movie || trendingDetail.item)) {
                             const detail = trendingDetail.movie || trendingDetail.item;
                             trendingMovie = { ...trendingMovie, ...mapKKPhimMovieToLocal(detail) };
                        }
                    } catch (e) {
                        console.warn('Could not fetch trending details, using list data', e);
                    }
                    console.log('‚úÖ ƒê√£ set phim trending m·∫∑c ƒë·ªãnh:', trendingMovie?.title);
                } else {
                    trendingMovie = null;
                    console.log('‚ö†Ô∏è Kh√¥ng c√≥ phim n√†o ƒë·ªÉ set trending');
                }
            }

updateUI();
} catch (error) {
console.error('‚ùå L·ªói khi t·∫£i d·ªØ li·ªáu t·ª´ KKPhim API:', error);
trendingContainer.innerHTML = `
<div class="trending-movie">
<div class="trending-poster" style="background: var(--gradient-primary); display: flex; align-items: center; justify-content: center;">
<i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: white; opacity: 0.5;"></i>
</div>
<div class="trending-info" style="align-items: center; text-align: center;">
<h3 class="trending-title">L·ªói k·∫øt n·ªëi</h3>
<p class="trending-desc">Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu t·ª´ server. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
<button class="trending-button" onclick="loadData()">
<i class="fas fa-redo"></i> T·∫£i l·∫°i
</button>
</div>
</div>
`;
        newMoviesCarousel.innerHTML = createSkeleton(3);
        allMoviesGrid.innerHTML = createSkeleton(12);
}
}

// ==================== DATA LOADING FROM FIRESTORE (COMMENTED OUT) ====================
/* 
async function loadDataOld() {
console.log('=== B·∫ÆT ƒê·∫¶U T·∫¢I D·ªÆ LI·ªÜU T·ª™ FIRESTORE ===');
try {
const moviesSnapshot = await db.collection("movies").get();
allMovies = [];
moviesSnapshot.forEach((doc) => {
const movieData = doc.data();
movieData.id = doc.id;
allMovies.push(movieData);
});
console.log(`‚úÖ ƒê√£ t·∫£i ${allMovies.length} phim t·ª´ Firestore`);
const trendingDoc = await db.collection("trending").doc("current").get();
if (trendingDoc.exists) {
trendingMovie = trendingDoc.data();
console.log('‚úÖ ƒê√£ t·∫£i phim trending:', trendingMovie?.title);
if (trendingMovie.movieId) {
const fullTrendingMovie = allMovies.find(movie => movie.id === trendingMovie.movieId);
if (fullTrendingMovie) {
trendingMovie = {
...fullTrendingMovie,
...trendingMovie
};
}
}
} else {
trendingMovie = null;
console.log('‚ö†Ô∏è Ch∆∞a c√≥ phim trending trong Firestore');
}
updateUI();
} catch (error) {
console.error('‚ùå L·ªói khi t·∫£i d·ªØ li·ªáu t·ª´ Firestore:', error);
}
}
*/
// ==================== UI UPDATES ====================
function updateUI() {
updateTrending();
updateNewMovies();
updateCategoryFilter();
if (!isSearching) {
updateAllMovies();
}
setTimeout(() => {
calculateMaxIndex();
updateCarouselPosition();
}, 100);
}
function updateTrending() {
if (!trendingMovie) {
trendingContainer.innerHTML = `
<div class="trending-movie">
<div class="trending-poster" style="background: var(--gradient-primary); display: flex; align-items: center; justify-content: center;">
<i class="fas fa-film" style="font-size: 2rem; color: white; opacity: 0.5;"></i>
</div>
<div class="trending-info" style="align-items: center; text-align: center;">
<h3 class="trending-title">Ch∆∞a c√≥ phim Trending</h3>
<p class="trending-desc">ƒêang t·∫£i d·ªØ li·ªáu t·ª´ KKPhim API...</p>
<button class="trending-button" onclick="loadData()">
<i class="fas fa-redo"></i> T·∫£i l·∫°i
</button>
</div>
</div>
`;
return;
}
let ratingDisplay = 'Ch∆∞a ƒë√°nh gi√°';
if (trendingMovie.rating && !isNaN(trendingMovie.rating)) {
ratingDisplay = parseFloat(trendingMovie.rating).toFixed(1);
}
const posterUrl = convertImageToWebP(trendingMovie.poster || '');
const descriptionText = stripHtmlTags(trendingMovie.description || '');
trendingContainer.innerHTML = `
<div class="trending-movie">
<div class="trending-poster">
<img src="${posterUrl || 'https://via.placeholder.com/800x450/1d4ed8/ffffff?text=No+Image'}"
alt="${trendingMovie.title}"
onerror="this.src='https://via.placeholder.com/800x450/1d4ed8/ffffff?text=No+Image'">
<div class="trending-badge">
<i class="fas fa-crown"></i> TOP TRENDING
</div>
</div>
<div class="trending-info">
<h3 class="trending-title">${trendingMovie.title}</h3>
<p class="trending-desc">${descriptionText || 'Kh√¥ng c√≥ m√¥ t·∫£'}</p>
<button class="trending-button" onclick="viewMovie('${trendingMovie.slug || trendingMovie.id}')">
<i class="fas fa-play"></i> Xem ngay
</button>
</div>
</div>
`;
}
async function updateNewMovies() {
newMoviesCarousel.innerHTML = createSkeleton(3);
try {
// Load phim m·ªõi t·ª´ API V3
const response = await fetchKKPhimAPI(`${KKPHIM_API_BASE}/danh-sach/phim-moi-cap-nhat-v3?page=1`);
const newMoviesData = response.items || response.data || [];
const newMovies = newMoviesData.slice(0, 8).map(movie => mapKKPhimMovieToLocal(movie));

if (newMovies.length === 0) {
setTimeout(() => {
newMoviesCarousel.innerHTML = `
<div style="width: 100%; text-align: center; padding: var(--space); color: var(--gray);">
<i class="fas fa-film" style="font-size: 1.5rem; margin-bottom: var(--space); color: rgba(255, 255, 255, 0.1);"></i>
<h3>Ch∆∞a c√≥ phim m·ªõi</h3>
</div>
`;
}, 500);
return;
}
setTimeout(() => {
displayMovies(newMovies, newMoviesCarousel, false);
calculateMaxIndex();
updateCarouselPosition();
}, 300);
} catch (error) {
console.error('‚ùå L·ªói khi t·∫£i phim m·ªõi:', error);
newMoviesCarousel.innerHTML = `
<div style="width: 100%; text-align: center; padding: var(--space); color: var(--gray);">
<i class="fas fa-exclamation-triangle" style="font-size: 1.5rem; margin-bottom: var(--space);"></i>
<h3>L·ªói t·∫£i d·ªØ li·ªáu</h3>
</div>
`;
}
}
async function updateHotMovies() {
// Phim Hot ƒë√£ ƒë∆∞·ª£c lo·∫°i b·ªè kh·ªèi giao di·ªán, h√†m gi·ªØ l·∫°i ƒë·ªÉ tr√°nh l·ªói g·ªçi c≈©
return;
}
let currentPage = 1;
let totalPages = 1;

async function updateAllMovies(page = 1) {
    allMoviesGrid.innerHTML = createSkeleton(12);
    try {
        const category = categoryFilter.value; // slug th·ªÉ lo·∫°i ho·∫∑c r·ªóng
        const sort = sortFilter.value;

        // G·ªçi API danh s√°ch phim b·ªô ƒë·ªÉ l·∫•y nhi·ªÅu phim h∆°n
        let apiUrl = `${KKPHIM_API_BASE}/v1/api/danh-sach/phim-bo?page=${page}&limit=60`;

        // Th√™m filter theo category (d√πng slug ƒë√∫ng chu·∫©n API)
        if (category && category !== '') {
            apiUrl += `&category=${encodeURIComponent(category)}`;
        }

        // Sort field mapping cho API
        let sortField = '_id';
        let sortType = 'desc';
        if (sort === 'newest' || sort === 'oldest') {
            sortField = 'modified.time';
            sortType = sort === 'newest' ? 'desc' : 'asc';
        } else if (sort === 'rating') {
            // API kh√¥ng h·ªó tr·ª£ sort theo rating, s·∫Ω sort l·∫°i local b√™n d∆∞·ªõi
            sortField = '_id';
            sortType = 'desc';
        } else if (sort === 'title') {
            // API c≈©ng kh√¥ng sort theo title, d√πng _id r·ªìi sort l·∫°i local
            sortField = '_id';
            sortType = 'desc';
        }

        apiUrl += `&sort_field=${sortField}&sort_type=${sortType}`;

        const response = await fetchKKPhimAPI(apiUrl);
        const moviesRoot = response.data || response;
        const moviesData = Array.isArray(moviesRoot.items) ? moviesRoot.items : [];

        let filteredMovies = moviesData.map(movie => mapKKPhimMovieToLocal(movie));

        // S·∫Øp x·∫øp l·∫°i local n·∫øu c·∫ßn
        if (sort === 'rating') {
            filteredMovies.sort((a, b) => (b.rating || 0) - (a.rating || 0));
        } else if (sort === 'title') {
            filteredMovies.sort((a, b) => {
                return (a.title || '').localeCompare(b.title || '', 'vi', { sensitivity: 'base' });
            });
        }

        if (filteredMovies.length === 0) {
            setTimeout(() => {
                allMoviesGrid.innerHTML = `
<div class="no-movies">
<i class="fas fa-film"></i>
<h3>Ch∆∞a c√≥ phim n√†o</h3>
<p>Kh√¥ng t√¨m th·∫•y phim ph√π h·ª£p v·ªõi b·ªô l·ªçc</p>
</div>
`;
            }, 500);
            return;
        }

        setTimeout(() => {
            displayMovies(filteredMovies, allMoviesGrid, true);
        }, 300);
    } catch (error) {
        console.error('‚ùå L·ªói khi t·∫£i t·∫•t c·∫£ phim:', error);
        allMoviesGrid.innerHTML = `
<div class="no-movies">
<i class="fas fa-exclamation-triangle"></i>
<h3>L·ªói t·∫£i d·ªØ li·ªáu</h3>
<p>Kh√¥ng th·ªÉ t·∫£i danh s√°ch phim. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
</div>
`;
    }
}
function displayMovies(movies, container, isGrid) {
if (movies.length === 0) {
container.innerHTML = `
<div class="no-movies">
<i class="fas fa-search"></i>
<h3>Kh√¥ng t√¨m th·∫•y phim</h3>
<p>Kh√¥ng c√≥ phim n√†o ph√π h·ª£p v·ªõi b·ªô l·ªçc ƒë√£ ch·ªçn</p>
</div>
`;
return;
}
container.innerHTML = movies.map(movie => createMovieCard(movie, isGrid)).join('');
}
function createMovieCard(movie, isGrid) {
const posterUrl = convertImageToWebP(movie.poster || '');
const movieSlug = movie.slug || movie.id;
const placeholderUrl = 'https://via.placeholder.com/150x225/1d4ed8/ffffff?text=No+Image';

if (isGrid) {
return `
<div class="movie-card">
<img src="${posterUrl || placeholderUrl}"
alt="${movie.title}"
class="movie-poster"
onerror="this.src='${placeholderUrl}'">
<div class="movie-info">
<h4 class="movie-title" title="${movie.title}">${movie.title}</h4>
<a href="movie.html?slug=${movieSlug}" class="watch-btn">
<i class="fas fa-play"></i> Xem
</a>
</div>
</div>
`;
} else {
return `
<div class="movie-card">
<img src="${posterUrl || placeholderUrl}"
alt="${movie.title}"
class="movie-poster"
onerror="this.src='${placeholderUrl}'">
<div class="movie-info">
<h4 class="movie-title" title="${movie.title}">${movie.title}</h4>
<div class="movie-meta">
<span>${movie.category || 'N/A'}</span>
</div>
<a href="movie.html?slug=${movieSlug}" class="watch-btn">
<i class="fas fa-play"></i> Xem phim
</a>
</div>
</div>
`;
}
}
async function updateCategoryFilter() {
    try {
        // Load categories t·ª´ API
        const response = await fetchKKPhimAPI(`${KKPHIM_API_BASE}/the-loai`);
        // API th∆∞·ªùng tr·∫£ v·ªÅ m·∫£ng tr·ª±c ti·∫øp ho·∫∑c { items: [...] }
        const categoriesData = Array.isArray(response) ? response : (response.items || []);
        
        let categories = [];

        if (categoriesData.length > 0) {
            categories = categoriesData.map(cat => ({
                slug: cat.slug || cat.id,
                name: cat.name || cat.title || cat.slug
            }));
        } else {
            // Fallback: l·∫•y t·ª´ allMovies hi·ªán t·∫°i
            categories = [...new Set(allMovies.map(movie => movie.category).filter(Boolean))].map(cat => ({
                slug: cat.toLowerCase().replace(/\s+/g, '-'),
                name: cat
            }));
        }

        // Clear existing options except the first one
        while (categoryFilter.options.length > 1) {
            categoryFilter.remove(1);
        }
        
        // Add new options (value = slug ƒë·ªÉ truy·ªÅn cho API, text = t√™n hi·ªÉn th·ªã)
        categories.forEach(cat => {
            const option = document.createElement('option');
            option.value = cat.slug;
            option.textContent = cat.name;
            categoryFilter.appendChild(option);
        });
    } catch (error) {
        console.error('‚ùå L·ªói khi load categories:', error);
        // Fallback to local categories
        const categories = [...new Set(allMovies.map(movie => movie.category).filter(Boolean))];
        while (categoryFilter.options.length > 1) {
            categoryFilter.remove(1);
        }
        categories.forEach(category => {
            const option = document.createElement('option');
            option.value = category;
            option.textContent = category;
            categoryFilter.appendChild(option);
        });
    }
}
function viewMovie(movieSlug) {
            window.location.href = `movie.html?slug=${movieSlug}`;
        }
// ==================== EVENT LISTENERS ====================
newPrevBtn.addEventListener('click', () => {
if (currentNewIndex > 0) {
currentNewIndex--;
updateCarouselPosition();
}
});
newNextBtn.addEventListener('click', () => {
if (currentNewIndex < maxNewIndex) {
currentNewIndex++;
updateCarouselPosition();
}
});
categoryFilter.addEventListener('change', updateAllMovies);
sortFilter.addEventListener('change', updateAllMovies);
// Resize handler
let resizeTimeout;
window.addEventListener('resize', () => {
clearTimeout(resizeTimeout);
resizeTimeout = setTimeout(() => {
calculateMaxIndex();
updateCarouselPosition();
}, 250);
});
// ==================== REALTIME UPDATES (COMMENTED OUT - USING API NOW) ====================
/* 
function setupRealtimeListeners() {
db.collection("movies").onSnapshot((snapshot) => {
console.log('üì° C√≥ thay ƒë·ªïi trong danh s√°ch phim');
loadData();
});
db.collection("trending").doc("current").onSnapshot((doc) => {
console.log('üì° C√≥ thay ƒë·ªïi trong phim trending');
loadData();
});
}
*/
// ==================== INITIALIZATION ====================
window.addEventListener('DOMContentLoaded', () => {
newMoviesCarousel.innerHTML = createSkeleton(3);
allMoviesGrid.innerHTML = createSkeleton(12);
loadData();
// setupRealtimeListeners(); // Commented out - using API now
if ('ontouchstart' in window || navigator.maxTouchPoints) {
document.documentElement.classList.add('touch-device');
} else {
document.documentElement.classList.add('no-touch');
}
});
// Ch·∫∑n chu·ªôt ph·∫£i
document.addEventListener('contextmenu', event => event.preventDefault());
// Ch·∫∑n c√°c ph√≠m t·∫Øt F12, Ctrl+Shift+I, Ctrl+U
document.onkeydown = function(e) {
if (e.keyCode == 123 ||
(e.ctrlKey && e.shiftKey && e.keyCode == 73) ||
(e.ctrlKey && e.keyCode == 85)) {
return false;
}
};
// Fix viewport height cho mobile
function setViewportHeight() {
let vh = window.innerHeight * 0.01;
document.documentElement.style.setProperty('--vh', `${vh}px`);
}
window.addEventListener('resize', setViewportHeight);
window.addEventListener('orientationchange', setViewportHeight);
setViewportHeight();
</script>
</body>
</html>
